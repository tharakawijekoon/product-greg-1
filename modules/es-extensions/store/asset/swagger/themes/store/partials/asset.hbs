<script>
    var isSocial = ('{{features.social.enabled}}' == 'true');
</script>
<div class="asset-description">
    {{#with assets}}
    {{#with attributes}}
    <div class="asset-description-header">
        <div class="es-col-lg-12 col-lg-12 white-bg left">
            <h3>{{../../rxt.singularLabel}} {{t "Details"}}</h3>
        </div>
    </div>
    <!-- asset details folder-->
    <div class="asset-details-header ">
        <!-- aset details -->
        <div class="col-xs-12 col-sm-12 col-md-5 col-lg-5 white-bg">
            <div class=" details-image white-bg">
                {{> asset-thumbnail ..}}
            </div>
            <div class="details-container">
                <div class="es-col-lg-12 col-lg-12">
                    {{> asset-details ..}}
                </div>
            </div>

        </div>
        <!-- end of asset details-->
    </div>
    <div class="asset-details-wrapper ">
        <div class="white-bg padding-double">
            {{> asset-utilization ../..}}
            {{> asset-version-info ../..}}

        </div>
    </div><!-- description column-->
    <!-- asset description -->
    <div class="assetp-properties">

        {{> view-asset-top-common-button-group ../.. }}

        <ul class="es-nav nav es-nav-tabs nav-tabs" id="assetp-tabs" data-aid="{{../path}}">
            <li id="asset-description" class="active">
                <a href="#tab-properties" data-toggle="tab" data-type="basic">{{t "Description"}}</a>
            </li>
            <li id="asset-swagger">
                <a href="#tab-swagger" data-toggle="tab" data-type="basic">{{t "API Console"}}</a>
            </li>
            <li id="user-reviews">
                <a href="#tab-reviews" data-toggle="tab" data-type="comments">{{t "User Reviews"}}</a>
            </li>
        </ul>

        <div class="tab-content">
            <div class="tab-pane active" id="tab-properties">
                <div class="content">
                    {{>overview ../..}}
                </div>
            </div>
            <div class="tab-pane" id="tab-swagger">

                {{#if ../../assets.downloadMetaData.swaggerUrl}}
                <link
                    href="https://fonts.googleapis.com/css?family=Open+Sans:400,700|Source+Code+Pro:300,600|Titillium+Web:400,600,700"
                    rel="stylesheet">
                <link rel="stylesheet" type="text/css"
                    href="/store/extensions/assets/swagger/themes/store/css/swagger-ui.css">
                <link rel="icon" type="image/png"
                    href="/store/extensions/assets/swagger/themes/store/imgs/favicon-32x32.png" sizes="32x32" />
                <link rel="icon" type="image/png"
                    href="/store/extensions/assets/swagger/themes/store/imgs/favicon-16x16.png" sizes="16x16" />
                <style>
                    .information-container,
                    .scheme-container {
                        display: none !important;
                    }
                </style>
                <style>
                    html {
                        box-sizing: border-box;
                        overflow: -moz-scrollbars-vertical;
                        overflow-y: scroll;
                    }

                    *,
                    *:before,
                    *:after {
                        box-sizing: inherit;
                    }

                    body {
                        margin: 0;
                        background: #fafafa;
                    }
                </style>

                <div id="swagger-ui">


                    <script src="/store/extensions/assets/swagger/themes/store/js/swagger-ui-bundle.js"> </script>
                    <script
                        src="/store/extensions/assets/swagger/themes/store/js/swagger-ui-standalone-preset.js"> </script>
                    <script type="application/json" id="hello">
                        {{../../../assets.content}}
                </script>
                    <script>
                        const DisableTryItOutPlugin = function () {
                            return {
                                statePlugins: {
                                    spec: {
                                        wrapSelectors: {
                                            allowTryItOutFor: () => () => false
                                        }
                                    }
                                }
                            }
                        }
                        function loadSwagger() {
                            var rawContent = JSON.parse($("#hello").html().replace(/&quot;/g, '"'));
                            // Begin Swagger UI call region
                            const ui = SwaggerUIBundle({
                                "dom_id": "#swagger-ui",
                                deepLinking: true,
                                presets: [
                                    SwaggerUIBundle.presets.apis,
                                ],
                                plugins: [
                                    DisableTryItOutPlugin,
                                    function () {

                                        return {
                                            components: {
                                                Models: function () {
                                                    return null;
                                                },
                                                schemes: function () {
                                                    return null;
                                                },
                                                authorizeBtn: function () {
                                                    return null;
                                                },
                                                info: function () {
                                                    return null;
                                                },
                                                Servers: function () {
                                                    return null;
                                                }
                                            }
                                        }
                                    }
                                ],
                                spec: rawContent,
                                layout: "BaseLayout"
                            });
                            // End Swagger UI call region
                            window.ui = ui
                        }
                        document.addEventListener("DOMContentLoaded", function (event) {
                            loadSwagger();
                        });
                    </script>
                    {{/if}}
                </div>

                <div class="tab-pane" id="tab-reviews">
                    {{#if ../../features.social.enabled}}
                    <iframe
                        src='{{url ""}}/pages/user-reviews?target={{../../type}}:{{../../id}}&url-domain={{../../../features.social.keys.urlDomain}}'
                        data-script='{{url ""}}/extensions/app/social-reviews/export-js/social.js'
                        data-script-type="text/javascript" width="100%" height="100%"
                        style="min-height: 500px;"></iframe>
                    {{/if}}
                    {{#if ../../inDashboard}}
                    <div id="comment-content" class="content"></div>
                    {{else}}
                    <div id="comment-content" class="content user-review"></div>
                    {{/if}}
                </div>
            </div>
        </div>

    </div>
    {{/with}}
    {{/with}}
</div>